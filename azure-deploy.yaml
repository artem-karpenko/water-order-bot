apiVersion: '2021-09-01'
location: northeurope
name: water-order-bot
properties:
  containers:
  - name: water-order-bot
    properties:
      image: yozhdev.azurecr.io/water-order-bot:latest
      resources:
        requests:
          cpu: 1
          memoryInGb: 1.5
      ports:
      - port: 3000
        protocol: TCP
      environmentVariables:
      - name: PORT
        value: '3000'
      - name: TELEGRAM_BOT_TOKEN
        secureValue: BOT_TOKEN_PLACEHOLDER
      - name: WHITELISTED_USER_IDS
        value: WHITELISTED_USER_IDS_PLACEHOLDER
      - name: GMAIL_CLIENT_ID
        secureValue: GMAIL_CLIENT_ID_PLACEHOLDER
      - name: GMAIL_CLIENT_SECRET
        secureValue: GMAIL_CLIENT_SECRET_PLACEHOLDER
      - name: GMAIL_REFRESH_TOKEN
        secureValue: GMAIL_REFRESH_TOKEN_PLACEHOLDER
      - name: EMAIL_SENDER_FILTER
        value: EMAIL_SENDER_FILTER_PLACEHOLDER
      - name: EMAIL_ORDER_SUBJECT
        value: EMAIL_ORDER_SUBJECT_PLACEHOLDER
      - name: EMAIL_ORDER_BODY
        value: EMAIL_ORDER_BODY_PLACEHOLDER
      - name: AZURE_STORAGE_CONNECTION_STRING
        secureValue: AZURE_STORAGE_CONNECTION_STRING_PLACEHOLDER
      - name: NODE_ENV
        value: 'production'
  osType: Linux
  restartPolicy: Always
  ipAddress:
    type: Public
    ports:
    - protocol: TCP
      port: 3000
    dnsNameLabel: water-order-bot
  imageRegistryCredentials:
  - server: yozhdev.azurecr.io
    username: yozhdev
    password: REGISTRY_PASSWORD_PLACEHOLDER
tags:
  environment: production
  app: water-order-bot
type: Microsoft.ContainerInstance/containerGroups
